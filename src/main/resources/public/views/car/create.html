<div class="container typeahead-demo">
    <form class="well input-form" name="inputcar" ng-submit="createCar()">
        <div class="form-group has-feedback" ng-class="{'has-success': inputcar.brand.$dirty && inputcar.brand.$valid, 'has-error': inputcar.brand.$dirty && inputcar.brand.$invalid}">
            <label class="control-label" for="brand">Marka pojazdu</label>
            <input type="text" class="form-control" name="brand" id="brand" ng-model="car.brandId"
                   uib-typeahead="carBrand.id as carBrand.name for carBrand in carBrands | filter:{name:$viewValue}"
                   typeahead-input-formatter="formatLabel($model, carBrands)"
                   typeahead-popup-template-url="customPopupTemplate.html"
                   typeahead-on-select="">
        </div>
        <div class="form-group has-feedback" ng-class="{'has-success': inputcar.model.$dirty && inputcar.model.$valid, 'has-error': inputcar.model.$dirty && inputcar.model.$invalid}">
            <label class="control-label" for="model">Model</label>
            <input type="text" class="form-control" name="model" id="model" ng-model="car.modelId"
                   uib-typeahead="carModel.id as carModel.name for carModel in carModels | filter:{name:$viewValue}"
                   typeahead-input-formatter="formatLabel($model, carModels)"
                   typeahead-popup-template-url="customPopupTemplate.html">
        </div>
        <div class="form-group has-feedback" ng-class="{'has-success': inputcar.registrationNumber.$dirty && inputcar.registrationNumber.$valid, 'has-error': inputcar.registrationNumber.$dirty && inputcar.registrationNumber.$invalid}">
            <label class="control-label" for="registrationNumber">Nr rejestracyjny</label>
            <input type="text" class="form-control" name="registrationNumber" id="registrationNumber"
                   ng-pattern="/^([A-Z]){2,3}\s?(([A-Z]{1,2}[0-9]{1,3}([A-Z]{1,2})?)|([0-9]{1,2}[A-Z]{1,2}[0-9]{1,3})|([0-9]{1,4}[A-Z]{1,2})|([0-9]{1,5}))$/"
                   ng-model="car.registrationNumber">
        </div>
        <div class="form-group has-feedback" ng-class="{'has-success': inputcar.year.$dirty && inputcar.year.$valid, 'has-error': inputcar.year.$dirty && inputcar.year.$invalid}">
            <label class="control-label" for="year">Rok produkcji</label>
            <input type="text" class="form-control" name="year" id="year" ng-pattern="/^(19|20)\d{2}$/" ng-model="car.year">
        </div>
        <div class="form-group">
            <label class="control-label">W użyciu</label>
            <div>
                <div class="btn-group" data-toggle="buttons">
                    <label class="btn btn-default" ng-class="{'active': car.isInUse}">
                        <input type="radio" name="isInUse" ng-value="true" ng-model="car.isInUse" /> Tak
                    </label>
                    <label class="btn btn-default" ng-class="{'active': !car.isInUse}">
                        <input type="radio" name="isInUse" ng-value="false" ng-model="car.isInUse" /> Nie
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label">Koła</label>
            <a class="btn btn-default pull-right" ng-click="showWheelTable=false">
                <span class="glyphicon glyphicon-minus" aria-hidden="true"></span></a>
            <a class="btn btn-default pull-right" ng-click="addWheel()">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a>
            <table class="table wheelTable" ng-show="showWheelTable">
                <thead class="thead-inverse">
                    <tr>
                        <th>Marka opony</th>
                        <th>Rozmiar</th>
                        <th>Ilość sztuk</th>
                        <th>Felga</th>
                        <th>Sezon</th>
                        <th>W użyciu</th>
                        <th>Uwagi</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="wheel in car.wheels track by $index">
                        <td>
                            <div class="form-group has-feedback" ng-class="{'has-success': inputcar.brand_{{$index}}.$dirty && inputcar.brand_{{$index}}.$valid, 'has-error': inputcar.brand_{{$index}}.$dirty && inputcar.brand_{{$index}}.$invalid}">
                            <input id="brand_{{$index}}" name="brand_{{$index}}"
                                   type="text" ng-model="wheel.brandId"
                                   uib-typeahead="tyreBrand.id as tyreBrand.name for tyreBrand in tyreBrands | filter:{name:$viewValue}"
                                   typeahead-input-formatter="formatLabel($model, tyreBrands)"
                                   typeahead-popup-template-url="customPopupTemplate.html"
                                   class="form-control">
                            </div>
                        </td>
                        <td>
                            <input type="text" ng-model="wheel.sizeId"
                                   uib-typeahead="tyreSize.id as tyreSize.name for tyreSize in tyreSizes | filter:{name:$viewValue}"
                                   typeahead-input-formatter="formatLabel($model, tyreSizes)"
                                   typeahead-popup-template-url="customPopupTemplate.html"
                                   class="form-control">
                        </td>
                        <td><input type="text" ng-model="wheel.quantity"
                                   ng-pattern="/^[0-9]*$/"
                                   class="form-control">
                        </td>
                        <td><input type="text" ng-model="wheel.rim"
                                   uib-typeahead="rimType for rimType in rimTypes | filter:$viewValue"
                                   typeahead-popup-template-url="customPopupTemplate.html"
                                   class="form-control">
                        </td>
                        <td><input type="text" ng-model="wheel.season"
                                   uib-typeahead="season for season in seasons | filter:$viewValue"
                                   typeahead-popup-template-url="customPopupTemplate.html"
                                   class="form-control">
                        </td>
                        <td>
                            <div>
                                <div class="btn-group" data-toggle="buttons">
                                    <label class="btn btn-default" ng-class="{'active': wheel.isInUse}">
                                        <input type="radio" ng-value="true" ng-model="wheel.isInUse" /> Tak
                                    </label>
                                    <label class="btn btn-default" ng-class="{'active': !wheel.isInUse}">
                                        <input type="radio" ng-value="false" ng-model="wheel.isInUse" /> Nie
                                    </label>
                                </div>
                            </div>
                        </td>
                        <td><input type="text" ng-model="wheel.comments"
                                   class="form-control">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <button class="btn btn-primary" type="submit" ng-disabled="inputcar.$invalid || inputcar.$pristine">Zapisz</button>
    </form>
</div>